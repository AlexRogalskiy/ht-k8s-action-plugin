global:
  buffersize: 100

# logger settings
log:
  format: "text"
  level: "debug"

# action plugin settings
action_plugins:
  - name: "ht-k8s-drainer-plugin"
    address: "localhost:8887"

  - name: "ht-aws-asg-action-plugin"
    address: "localhost:8888"


# action plugin rules
rules:
  - name: "spot_to_drainer"
    description: "spot to k8s drainer"
    event_type: "prometheus.server.alert.SpotTerminationNotice"
    action_plugins:
      - "ht-k8s-drainer-plugin"
      - "ht-aws-asg-action-plugin"

  - name: "spot_rebalance"
    description: "price alert to asg rebalance"
    event_type: "prometheus.server.alert.AsgPriceTooHigh"
    action_plugins:
      - "ht-aws-asg-action-plugin"
    match:
      - group: "my-cluster-12"
